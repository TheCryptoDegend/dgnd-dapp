<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DGND DAO dApp</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #f5f5f5;
      text-align: center;
      padding: 2rem;
    }
    button {
      padding: 10px 20px;
      background: #e50914;
      color: white;
      border: none;
      font-size: 16px;
      margin-top: 10px;
      cursor: pointer;
    }
    .wallet, iframe, .section {
      margin-top: 2rem;
    }
    iframe { border: none; }
    a { color: #ffd700; text-decoration: underline; }
    h2 { margin-top: 3rem; }
    .tip-box {
      background: #222;
      border: 2px solid #e50914;
      border-radius: 12px;
      padding: 20px;
      margin: 30px auto;
      width: 320px;
    }
    .tip-box img { margin-top: 10px; width: 200px; }
    code { word-break: break-all; color: #0f0; }
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 16px;
      margin: 20px 0;
    }
    .stat-card {
      background: #1a1a1a;
      border: 1px solid #333;
      border-radius: 12px;
      padding: 16px;
    }
    .stat-title { font-size: 14px; opacity: 0.75; margin-bottom: 8px; }
    .stat-value { font-size: 22px; font-weight: bold; }
    .subtle { font-size: 12px; opacity: 0.65; word-break: break-all; }
  </style>
</head>
<body>
  <h1>ðŸ”¥ Degends DAO Dashboard</h1>

  <div class="wallet">
    <button onclick="connectWallet()">Connect Wallet</button>
    <p id="walletAddress"></p>
    <p><strong>Your $DGND Balance:</strong> <span id="dgndBalance">-</span></p>
  </div>

  <hr>

  <h3>ðŸª™ DGND Token Info</h3>
  <p><strong>Token Address:</strong> 0x916eC27E0db3f8beb2c784a2617014094089148A</p>

  <!-- Burned Supply Section (dead wallet only) -->
  <h3>ðŸ”¥ Total Burned Supply</h3>
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-title">Burned (tracked)</div>
      <div class="stat-value"><span id="burnedCombined">Loading...</span> DGND</div>
      <div class="subtle">Dead wallet only</div>
    </div>
    <div class="stat-card">
      <div class="stat-title">Dead wallet</div>
      <div class="stat-value"><span id="burnedDead">-</span> DGND</div>
      <div class="subtle">0x000000000000000000000000000000000000dEaD</div>
    </div>
    <div class="stat-card">
      <div class="stat-title">% of current totalSupply()</div>
      <div class="stat-value"><span id="burnPct">-</span></div>
      <div class="subtle">Uses live totalSupply()</div>
    </div>
  </div>

  <h3>ðŸ’¼ Treasury Wallets</h3>
  <p><strong>Solana:</strong> 9VwPJchy7utZt5zP69mz6LQSWEgpN97SkxoA1i35RJPm</p>
  <p><strong>EVM:</strong> 0x7B95b039d4B9C10772376643B1B7C496C80d0062</p>

  <h3>ðŸ“ˆ Price Chart</h3>
  <iframe src="https://dexscreener.com/avalanche/0x684672f04b38ade02aebd8923c643593e24ccf7b?embed=1" width="100%" height="400"></iframe>

  <h3>ðŸ’¸ OTC Deal Request</h3>
  <p><a href="mailto:mikevessicchio@gmail.com?subject=OTC Deal for DGND&body=Hey, I'm interested in an OTC deal. Here's my wallet address: " target="_blank">Send Email to Mike</a></p>

  <h2>ðŸŽ¶ Lil Script â€“ Music Player</h2>
  <iframe width="100%" height="166" scrolling="no" frameborder="no"
    src="https://www.youtube.com/embed/gKl_SmAzeKo?controls=1" allowfullscreen>
  </iframe>

  <div class="tip-box">
    <h3>ðŸ’¸ Tip Lil Script</h3>
    <p>Support the artist behind the movement:</p>
    <p><strong>Wallet:</strong></p>
    <code>0x78d4cf99cEEca2783681DEBbb5e103b2c25D0DFc</code>
    <br>
    <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=0x78d4cf99cEEca2783681DEBbb5e103b2c25D0DFc" alt="Tip QR Code">
  </div>

  <div class="section">
    <h2>âš¡ EMP Fusion</h2>
    <p>EMP Fusion is a gamified DeFi ecosystem with a focus on sustainability, passive income, and community governance. DGND DAO has an active partnership with EMP including token allocations and fusion ecosystem integrations.</p>
  </div>

  <div class="section">
    <h2>ðŸŽ® Honor vs Madness (HvM)</h2>
    <p>Honor vs Madness is a tactical strategy game powered by ImmutableX. DGND is a lore-integrated partner, with NFT perks and exclusive airdrops. Our treasury has direct exposure to HvM for long-term growth and narrative alignment.</p>
  </div>

  <div class="section">
    <h2>ðŸŒ± BERTI</h2>
    <p>BERTI powers decentralized renewable energy via tokenized microgrids. DGND DAO holds a position in BERTI and provides treasury support. This partnership represents our commitment to real-world utility and ecosystem expansion.</p>
  </div>

  <div class="section">
    <h2>ðŸ¤– SyntraFi</h2>
    <p>SyntraFi offers Telegram bots and tools to monetize engagement. DGND has donated tokens to the SyntraFi team in good faith to open collaborative tools for our DAO. Expect joint bot use, alerts, and channel monetization to increase revenue for holders.</p>
  </div>

  <script>
    const tokenAddress = "0x916eC27E0db3f8beb2c784a2617014094089148A";
    const tokenDecimals = 18;
    const deadWallet = "0x000000000000000000000000000000000000dEaD";
    const avaxRpc = "https://api.avax.network/ext/bc/C/rpc";

    async function connectWallet() {
      if (window.ethereum) {
        const provider = new ethers.providers.Web3Provider(window.ethereum);
        await provider.send("eth_requestAccounts", []);
        const signer = provider.getSigner();
        const address = await signer.getAddress();
        document.getElementById("walletAddress").textContent = address;

        const tokenABI = [
          "function balanceOf(address) view returns (uint256)"
        ];

        const token = new ethers.Contract(tokenAddress, tokenABI, provider);
        const balance = await token.balanceOf(address);
        const formatted = ethers.utils.formatUnits(balance, tokenDecimals);
        document.getElementById("dgndBalance").textContent = parseFloat(formatted).toFixed(4);
      } else {
        alert("Please install MetaMask!");
      }
    }

    // Burned supply = tokens held by the dead wallet
    async function loadBurnedSupply() {
      try {
        const provider = new ethers.providers.JsonRpcProvider(avaxRpc);
        const tokenABI = [
          "function balanceOf(address) view returns (uint256)",
          "function totalSupply() view returns (uint256)"
        ];
        const token = new ethers.Contract(tokenAddress, tokenABI, provider);

        const [deadBalBN, totalSupplyBN] = await Promise.all([
          token.balanceOf(deadWallet),
          token.totalSupply()
        ]);

        const deadBal = parseFloat(ethers.utils.formatUnits(deadBalBN, tokenDecimals));
        const totalSupply = parseFloat(ethers.utils.formatUnits(totalSupplyBN, tokenDecimals));

        const combined = deadBal; // dead wallet only
        const pct = totalSupply > 0 ? (combined / totalSupply) * 100 : 0;

        document.getElementById("burnedDead").textContent =
          deadBal.toLocaleString(undefined, { maximumFractionDigits: 6 });
        document.getElementById("burnedCombined").textContent =
          combined.toLocaleString(undefined, { maximumFractionDigits: 6 });
        document.getElementById("burnPct").textContent = pct.toFixed(4) + "%";
      } catch (err) {
        console.error("Error loading burned supply:", err);
        document.getElementById("burnedCombined").textContent = "Error";
        document.getElementById("burnedDead").textContent = "-";
        document.getElementById("burnPct").textContent = "-";
      }
    }

    window.addEventListener("load", loadBurnedSupply);
  </script>
</body>
</html>
