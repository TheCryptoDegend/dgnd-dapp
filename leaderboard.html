<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DGND Holder Leaderboard</title>
  <style>
    body { font-family: Arial, sans-serif; background:#111; color:#f5f5f5; margin:0; padding:24px; }
    a { color:#ffd700; text-decoration:underline; }
    .wrap{ max-width:1100px; margin:0 auto; }
    .topbar{
      display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap;
      margin-bottom:12px;
    }
    .actions{ display:flex; gap:10px; flex-wrap:wrap; }
    input[type="text"]{
      background:#181818; color:#fff; border:1px solid #2a2a2a; border-radius:12px;
      padding:10px 12px; min-width:260px; outline:none;
    }
    button{
      padding:10px 14px; border:none; border-radius:12px; font-weight:700; cursor:pointer;
      background:linear-gradient(135deg,#22c55e,#2dd4bf); color:#04210e;
    }
    button.secondary{
      background:#181818; color:#e5e5e5; border:1px solid #2a2a2a;
    }
    .meta{ color:#9cb0c2; font-size:14px; margin-bottom:10px; }
    .table-wrap{ overflow:auto; border-radius:12px; border:1px solid #333; background:#1a1a1a; }
    table{ width:100%; border-collapse:separate; border-spacing:0; min-width:720px; }
    thead th{
      background:#151515; color:#eaeaea; font-weight:700; font-size:14px;
      text-transform:uppercase; letter-spacing:.04em; text-align:left; padding:14px 16px;
      border-bottom:1px solid #2a2a2a;
    }
    tbody td{ padding:14px 16px; border-bottom:1px solid #2a2a2a; vertical-align:top; }
    tbody tr:last-child td{ border-bottom:none; }
    code { color:#0f0; }
    .me{ background:rgba(34,197,94,.08); }
    .me td{ border-bottom-color:rgba(34,197,94,.25); }
    .footer-actions{ display:flex; justify-content:center; margin-top:12px; }
    .note{ color:#9cb0c2; font-size:12px; margin-top:8px; }
    .back{ margin-bottom:16px; display:inline-block; }
  </style>
</head>
<body>
  <div class="wrap">
    <a class="back" href="./index.html">‚Üê Back to Dashboard</a>
    <h1>üèÜ DGND Holder Leaderboard</h1>

    <div class="topbar">
      <div class="actions">
        <input type="text" id="search" placeholder="Search address (0x‚Ä¶ or partial)"/>
        <button id="jump">Jump to my wallet</button>
        <button id="clear" class="secondary">Clear search</button>
      </div>
      <div class="meta" id="meta">Loading‚Ä¶</div>
    </div>

    <div class="table-wrap">
      <table aria-label="DGND Holder Leaderboard">
        <thead>
          <tr>
            <th style="width:90px">Rank</th>
            <th>Address</th>
            <th style="width:220px;text-align:right">Balance (DGND)</th>
          </tr>
        </thead>
        <tbody id="tbody"></tbody>
      </table>
    </div>

    <div class="footer-actions">
      <button id="more">Show 50 more</button>
    </div>

    <div class="note">
      Data comes from your GitHub Action (Covalent ‚Üí <code>leaderboard.json</code>). The list is pre-sorted by balance desc.
    </div>
  </div>

  <script>
    // ====== CONFIG: set this path to where your JSON is hosted ======
    // If Pages serves from /docs and this file lives in /docs with the JSON:
    const LB_URL = './leaderboard.json';
    // If Pages serves from root and JSON is at /leaderboard.json:
    // const LB_URL = '/leaderboard.json';

    const PAGE_SIZE = 50;
    let all = [];        // full dataset
    let view = [];       // filtered (search) view
    let cursor = 0;      // pagination cursor
    let myWallet = (localStorage.getItem('myWallet') || '').toLowerCase();

    const tbody = document.getElementById('tbody');
    const meta  = document.getElementById('meta');
    const more  = document.getElementById('more');
    const search = document.getElementById('search');
    const jump   = document.getElementById('jump');
    const clear  = document.getElementById('clear');

    function fmtBalance(x){
      return Number(x).toLocaleString(undefined, { maximumFractionDigits: 6 });
    }

    function shortAddr(a){
      return a.slice(0, 6) + '‚Ä¶' + a.slice(-4);
    }

    function explorerLink(address){
      return `https://snowtrace.io/address/${address}`;
    }

    function rowHTML(holder, rank, highlight){
      return `
        <tr class="${highlight ? 'me' : ''}" data-address="${holder.address}">
          <td>${rank}</td>
          <td>
            <a href="${explorerLink(holder.address)}" target="_blank" rel="noopener">
              <code>${shortAddr(holder.address)}</code>
            </a>
          </td>
          <td style="text-align:right">${fmtBalance(holder.balance)}</td>
